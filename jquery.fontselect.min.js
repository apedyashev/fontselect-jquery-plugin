/*
 * jQuery.fontselect - A font selector for the Google Web Fonts api
 * Tom Moor, http://tommoor.com
 * Alexey Pedyashev, added WebFont.load
 * Copyright (c) 2011 Tom Moor
 * MIT Licensed
 * @version 0.1
*/
(function(e){e.fn.fontselect=function(t){var n=function(e,t){return function(){return e.apply(t,arguments)}};var r=["Aclonica","Allan","Annie+Use+Your+Telescope","Anonymous+Pro","Allerta+Stencil","Allerta","Amaranth","Anton","Architects+Daughter","Arimo","Artifika","Arvo","Asset","Astloch","Bangers","Bentham","Bevan","Bigshot+One","Bowlby+One","Bowlby+One+SC","Brawler","Buda:300","Cabin","Calligraffitti","Candal","Cantarell","Cardo","Carter One","Caudex","Cedarville+Cursive","Cherry+Cream+Soda","Chewy","Coda","Coming+Soon","Copse","Corben:700","Cousine","Covered+By+Your+Grace","Crafty+Girls","Crimson+Text","Crushed","Cuprum","Damion","Dancing+Script","Dawning+of+a+New+Day","Didact+Gothic","Droid+Sans","Droid+Sans+Mono","Droid+Serif","EB+Garamond","Expletus+Sans","Fontdiner+Swanky","Forum","Francois+One","Geo","Give+You+Glory","Goblin+One","Goudy+Bookletter+1911","Gravitas+One","Gruppo","Hammersmith+One","Holtwood+One+SC","Homemade+Apple","Inconsolata","Indie+Flower","IM+Fell+DW+Pica","IM+Fell+DW+Pica+SC","IM+Fell+Double+Pica","IM+Fell+Double+Pica+SC","IM+Fell+English","IM+Fell+English+SC","IM+Fell+French+Canon","IM+Fell+French+Canon+SC","IM+Fell+Great+Primer","IM+Fell+Great+Primer+SC","Irish+Grover","Irish+Growler","Istok+Web","Josefin+Sans","Josefin+Slab","Judson","Jura","Jura:500","Jura:600","Just+Another+Hand","Just+Me+Again+Down+Here","Kameron","Kenia","Kranky","Kreon","Kristi","La+Belle+Aurore","Lato:100","Lato:100italic","Lato:300","Lato","Lato:bold","Lato:900","League+Script","Lekton","Limelight","Lobster","Lobster Two","Lora","Love+Ya+Like+A+Sister","Loved+by+the+King","Luckiest+Guy","Maiden+Orange","Mako","Maven+Pro","Maven+Pro:500","Maven+Pro:700","Maven+Pro:900","Meddon","MedievalSharp","Megrim","Merriweather","Metrophobic","Michroma","Miltonian Tattoo","Miltonian","Modern Antiqua","Monofett","Molengo","Mountains of Christmas","Muli:300","Muli","Neucha","Neuton","News+Cycle","Nixie+One","Nobile","Nova+Cut","Nova+Flat","Nova+Mono","Nova+Oval","Nova+Round","Nova+Script","Nova+Slim","Nova+Square","Nunito:light","Nunito","OFL+Sorts+Mill+Goudy+TT","Old+Standard+TT","Open+Sans:300","Open+Sans","Open+Sans:600","Open+Sans:800","Open+Sans+Condensed:300","Orbitron","Orbitron:500","Orbitron:700","Orbitron:900","Oswald","Over+the+Rainbow","Reenie+Beanie","Pacifico","Patrick+Hand","Paytone+One","Permanent+Marker","Philosopher","Play","Playfair+Display","Podkova","PT+Sans","PT+Sans+Narrow","PT+Sans+Narrow:regular,bold","PT+Serif","PT+Serif Caption","Puritan","Quattrocento","Quattrocento+Sans","Radley","Raleway:100","Redressed","Rock+Salt","Rokkitt","Ruslan+Display","Schoolbell","Shadows+Into+Light","Shanti","Sigmar+One","Six+Caps","Slackey","Smythe","Sniglet:800","Special+Elite","Stardos+Stencil","Sue+Ellen+Francisco","Sunshiney","Swanky+and+Moo+Moo","Syncopate","Tangerine","Tenor+Sans","Terminal+Dosis+Light","The+Girl+Next+Door","Tinos","Ubuntu","Ultra","Unkempt","UnifrakturCook:bold","UnifrakturMaguntia","Varela","Varela Round","Vibur","Vollkorn","VT323","Waiting+for+the+Sunrise","Wallpoet","Walter+Turncoat","Wire+One","Yanone+Kaffeesatz","Yanone+Kaffeesatz:300","Yanone+Kaffeesatz:400","Yanone+Kaffeesatz:700","Yeseva+One","Zeyada"];if(t&&t.fonts){r=t.fonts}WebFont.load({google:{families:r}});var i={style:"font-select",placeholder:"Select a font",lookahead:2,api:"http://fonts.googleapis.com/css?family="};var s=function(){function t(t,n){this.$original=e(t);this.options=n;this.active=false;this.setupHtml();this.getVisibleFonts();this.bindEvents();var r=this.$original.val();if(r){this.updateSelected();this.addFontLink(r)}}t.prototype.bindEvents=function(){e("li",this.$results).click(n(this.selectFont,this)).mouseenter(n(this.activateFont,this)).mouseleave(n(this.deactivateFont,this));e("span",this.$select).click(n(this.toggleDrop,this));this.$arrow.click(n(this.toggleDrop,this))};t.prototype.toggleDrop=function(e){if(this.active){this.$element.removeClass("font-select-active");this.$drop.hide();clearInterval(this.visibleInterval)}else{this.$element.addClass("font-select-active");this.$drop.show();this.moveToSelected();this.visibleInterval=setInterval(n(this.getVisibleFonts,this),500)}this.active=!this.active};t.prototype.selectFont=function(){var t=e("li.active",this.$results).data("value");this.$original.val(t).change();this.updateSelected();this.toggleDrop()};t.prototype.moveToSelected=function(){var t,n=this.$original.val();if(n){t=e("li[data-value='"+n+"']",this.$results)}else{t=e("li",this.$results).first()}this.$results.scrollTop(t.addClass("active").position().top)};t.prototype.activateFont=function(t){e("li.active",this.$results).removeClass("active");e(t.currentTarget).addClass("active")};t.prototype.deactivateFont=function(t){e(t.currentTarget).removeClass("active")};t.prototype.updateSelected=function(){var t=this.$original.val();e("span",this.$element).text(this.toReadable(t)).css(this.toStyle(t))};t.prototype.setupHtml=function(){this.$original.empty().hide();this.$element=e("<div>",{"class":this.options.style});this.$arrow=e("<div><b></b></div>");this.$select=e("<a><span>"+this.options.placeholder+"</span></a>");this.$drop=e("<div>",{"class":"fs-drop"});this.$results=e("<ul>",{"class":"fs-results"});this.$original.after(this.$element.append(this.$select.append(this.$arrow)).append(this.$drop));this.$drop.append(this.$results.append(this.fontsAsHtml())).hide()};t.prototype.fontsAsHtml=function(){var e=r.length;var t,n,i="";for(var s=0;s<e;s++){t=this.toReadable(r[s]);n=this.toStyle(r[s]);i+='<li data-value="'+r[s]+'" style="font-family: '+n["font-family"]+"; font-weight: "+n["font-weight"]+'">'+t+"</li>"}return i};t.prototype.toReadable=function(e){return e.replace(/[\+|:]/g," ")};t.prototype.toStyle=function(e){var t=e.split(":");return{"font-family":this.toReadable(t[0]),"font-weight":t[1]||400}};t.prototype.getVisibleFonts=function(){if(this.$results.is(":hidden"))return;var t=this;var n=this.$results.scrollTop();var r=n+this.$results.height();if(this.options.lookahead){var i=e("li",this.$results).first().height();r+=i*this.options.lookahead}e("li",this.$results).each(function(){var i=e(this).position().top+n;var s=i+e(this).height();if(s>=n&&i<=r){var o=e(this).data("value");t.addFontLink(o)}})};t.prototype.addFontLink=function(t){var n=this.options.api+t;if(e("link[href*='"+t+"']").length===0){e("link:last").after('<link href="'+n+'" rel="stylesheet" type="text/css">')}};return t}();return this.each(function(){if(t)e.extend(i,t);return new s(this,i)})}})(jQuery)